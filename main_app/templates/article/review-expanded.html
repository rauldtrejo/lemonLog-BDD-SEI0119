{% extends 'base.html' %}
{% block content %}
<div class="article-container">
<div style="height: 75vh" class="row">
  <div class="col m8">
    <div class="row">
      <div class="col s12 m12">
        <div style="width: 100%; height: 85vh; overflow-y: scroll" class="card">
          <div class="card-image">
            <img
              class="center-align"
              style="width: 100%"
              src="{{review.image_url}}"
            />
          </div>
          <div class="card-content">
            <span class="card-title blue-text text-darken-2"
              >{{review.title}}</span
            >
            <h6>{{review.brand}} - {{review.product_name}}</h6>
            <p>Our Rating: {{ review.rating }}/10</p>
            <p class="grey-text text-darken-1">
              Posted On: {{review.creation_date}}
            </p>
            <!-- fix the text so its justified -->
            <p>{{review.content}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col m4 s12 teal lighten-1">
    <h5 class="center-align white-text">Comment Section</h5>
    <p class="center-align white-text">
      Number of Comments: {{number_of_comments}}
    </p>
  </div>
  <div style="overflow-y: scroll; height: 100%" class="col m4 s12">
    <div class="col s12 m12">
      {% for comment in comment %}
      <div class="card horizontal">
        <div class="card-stacked">
          <div class="card-content">
            <a href="{% url 'profile_public' comment.user.username %}"
              ><h5>{{comment.user.username}}</h5></a
            >
            <p class="grey-text text-darken-1">{{comment.creation_date}}</p>
            <p>{{comment.content}}</p>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  <div>
    <!-- Modal Trigger -->
    <a
      class="waves-effect waves-light btn modal-trigger col s12 m4 right hide-on-med-and-down"
      href="#modal1"
      >Add a Comment</a
    >
    <!-- Modal Structure -->
    <div id="modal1" class="modal hide-on-med-and-down">
      <div class="modal-content">
        <h4>Add a Comment</h4>
        <form method="post" action="{% url 'add_comment' review.id %}">
          {% csrf_token %}
          <div class="input-field col s12">
            <textarea
              id="textarea2"
              class="materialize-textarea"
              data-length="120"
              maxlength="240"
              required
              name="content"
            ></textarea>
            <label for="textarea2">240 Characters Max.</label>
            <input type="submit" class="btn col s12 m4" value="Add Comment" />
          </div>
        </form>
      </div>
    </div>

    <a
      class="waves-effect waves-light btn modal-trigger col s12 m4 right hide-on-large-only"
      href="#modal2"
      >Add a Comment</a
    >
    <!-- Modal Structure -->
    <div id="modal2" class="modal bottom-sheet hide-on-large-only">
      <div class="modal-content">
        <h4>Add a Comment</h4>
        <form method="post" action="{% url 'add_comment' review.id %}">
          {% csrf_token %}
          <div class="input-field col s12">
            <textarea
              id="textarea2"
              class="materialize-textarea"
              data-length="120"
              maxlength="240"
              required
              name="content"
            ></textarea>
            <label for="textarea2">240 Characters Max.</label>
            <input type="submit" class="btn col s12 m4" value="Add Comment" />
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
</div>
  {% endblock content %}
